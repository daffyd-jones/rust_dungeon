//settlement rs
use crate::enums::{Settle, Cells, NPCWrap};
use crate::shop::{Shop};
use crate::enums::Shops;
use crate::npc::new_shop_npc;
use crate::item::Item;

use std::collections::HashMap;

const large_settlement_empty: &str = r#".
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
"#;

const twn: &str = r#"| empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ╣ ║ ╗ ╝ ╚ ╔ ╩ ╦ ╠ ═ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_______________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________________________________________________________________________________________________________________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒__________________________________________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒__________________________________________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_______________________║____║_______║_________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒══════════__═══════════╝____╚═══════╩════════__═══════▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒════════════════════════════╬═════════__══════════▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒═══════════════════════════════____═══════════════════▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_____________________│________________________________▒___________________▒_______________________┌─┐__║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒┬──┬──┬──┬──┬──┬──┬──┘____________┼____┼____┼____┼____▒___________________▒_______________________│____║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒__________________________________│____│____│____│____▒___________________▒_______________________│____║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒__________________________________┼____┼____┼____┼____▒___________________▒_______________________│____║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒__________________________________│____│____│____│____▒___________________▒_______________________│__________________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒__________________________________┼____┼____┼____┼____▒___________________▒_______________________│__________________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒_______________________│____║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________________________________
_______________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________00______________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
______________________________________________________________________________________________________________________________░░░░░░________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
_____________________________________________________________________________________________________________________________░░░░░▓░░_______________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
___________________________________________________________'','','','','','','','','','',____________________________________░░░▓░░░░░______________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
___________________________________________________________',,',,',,',,',,',,',,',,',,','','',_______________________________░░░░▓░░░░______________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒__▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒__▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________________________________________
___________________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,','','',___________________________░░░░░▓░░_______________________________________________________________________________________________________________________________________________________________________
______________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,'','',______________________░░░░░░_______________________________________________________________________________________________________________________________________________________________________________________________________________
___________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,'',_______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~','',_______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~','''',_____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',','','',___________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,'','','','',____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,',,''','','','',________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒__▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,',,','',______________________________________▒_________________________________________▒_________▒_______________________________________▒_________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,'',___________________________________▒_________________________________________▒_________▒_______________________________________▒____________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',____________________________________▒_________________________________________▒_________▒_______________________________________▒______________________________________________________________________________________________________________________________
_______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',,____________________________________▒_________________________________________▒_________▒_______________________________________▒_____________________________________________________________________________________________________________________________
_______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,_____________________________________▒_________________________________________▒_________▒_______________________________________▒_____________________________________________________________________________________________________________________________
_______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',_____________________________________▒_________________________________________▒_________▒_______________________________________▒_____________________________________________________________________________________________________________________________
________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,_____________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________________________________________________________________________________________________
_________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
__________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',',,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
___________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',',,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_____________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'','','',',,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
________________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'','',''',,',,',,,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
___________________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'','','','',',,',,',,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
________________________________________________________________________________________________________',,',,',,',,_________________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___________________________________________________________________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
"#;

const chnk: &str = r#"| empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ╣ ║ ╗ ╝ ╚ ╔ ╩ ╦ ╠ ═ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
"#;

const gg: &str = r#"
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
_____________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________
_____________▒_______________________║______________________________▒_______________________________
_____________▒_______________________║______________________________▒_______________________________
_____________▒______________________________________________________▒___┌┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┐____
_____________▒______________________________________________________▒___├______________________┤____
_____________▒_______________________║______________________________▒___├____***_______________┤____
_____________▒_______________________║______________________________▒___├____**________________┤____
_____________▒═══════════__══════════╩══════════════════╗___________▒___├______________________┤____
_____________▒__________________________________________║___________▒___├______________________┤____
_____________▒__________________________│_______________║___________▒___├______________________┤____
_____________▒──────────────────────────┘_______┼___┼___║___________▒___├______________________┤____
_____________▒__________________________________│___│___║___________▒___├______________________┤____
_____________▒__________________________________│___│___║___________▒___├______________________┤____
_____________▒__________________________________┼___┼___║___________▒___├______________________┤____
_____________▒__________________________________________║___________▒___├______________________┤____
_____________▒_├_┤_├_┤_├_┤_├_┤_├_┤_├_┤__________________║___________▒___├______________________┤____
_____________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___├┬┬┬┬┬┬─┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┤____
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
"#;

// const large_sett_ = vec![
//
// ];

const q: &str =
r#"| empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ╣ ║ ╗ ╝ ╚ ╔ ╩ ╦ ╠ ═ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
_________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║___________________________________________________
_________________________________▒______________║___________________________________________________
_________________________________▒______________║___________________________________________________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
"#;

const a: &str = r#" empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ╣ ║ ╗ ╝ ╚ ╔ ╩ ╦ ╠ ═ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
"#;


const cave_o: &str = r#".
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________▒▒▒▒▒▒▒▒▒▒▒▒_____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________▒▒▒▒▒▒▒▒▒▒▒▒_____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_________________________________▒▒▒▒_____________________________________▒▒▒▒____
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_________________________________▒▒▒▒_____________________________________▒▒▒▒____
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_________________________________▒▒▒▒_____________________________________▒▒▒▒____
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_________________________________▒▒▒▒_____________________________________▒▒▒▒____
▒▒▒▒__________________________________________________________________________________________________________________________________________▒▒▒▒____
▒▒▒▒__________________________________________________________________________________________________________________________________________▒▒▒▒____
▒▒▒▒__________________________________________________________________________________________________________________________________________▒▒▒▒____
▒▒▒▒__________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________________________________________________________________▒▒▒▒____
______________________________▒                                      ▒________________________________________________________________________________
______________________________▒                                      ▒________________________________________________________________________________
▒▒▒▒__________________________▒                                      ▒________________________________________________________________________________
▒▒▒▒__________________________▒                                      ▒________________________________________________________________________________
▒▒▒▒__________________________▒═══════════════════════════════   ════▒________________________________________________________________________▒▒▒▒____
▒▒▒▒__________________________▒   │    │    │               @        ▒________________________________________________________________________▒▒▒▒____
______________________________▒   ┼    ┼    ┴       └────────────────▒________________________________________________________________________▒▒▒▒____
______________________________▒   │    │                             ▒________________________________________________________________________▒▒▒▒____
______________________________▒                                      ▒_____________├┤_________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒____
______________________________▒                                      ▒____________,├┤,________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒____
▒▒▒▒__________________________▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________,..,________________________________________________________▒▒▒▒____
▒▒▒▒____________________________________________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________▒▒▒▒____
▒▒▒▒____________________________________________________________________________@_______________▒    │°  ╚══════════════╝ °│    ▒_____________▒▒▒▒____
▒▒▒▒____________________________________________________________________________________________▒    │°   ≡ø≡  ±©±  ≡ø≡   °│    ▒_____________▒▒▒▒____
________________________________________________________________________________________________▒    └─────────────────────┘    ▒_____________▒▒▒▒____
▒▒▒▒____________________________________________________________________________________________▒    ░░░░░░░░░░░░░░░░░░░░░░░@   ▒_____________▒▒▒▒____
▒▒▒▒_____________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________▒    ░░░░░░░░░░░░░░░░░░░░░░░    ▒_____________▒▒▒▒____
▒▒▒▒_____________________▒┌──────┐  ║      │   └──────┘   ▒________________┌_____┐______________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
▒▒▒▒_____________________▒└──────┘  ║      ┘              ▒______________@_│{(¤)}│______________▒    └───────┘░░░░░└───────┘    ▒_____________________
_________________________▒┌──────┐  ║                @    ▒________________├┴─┬─┴┤______________▒    └───────┘░░░░░└───────┘    ▒_____________________
_________________________▒└──────┘  ║      ┐              ▒_____________________________________▒    └───────┘░░░░░└───────┘    ▒_____________________
_________________________▒┌──────┐  ║      │              ______________________________________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
▒▒▒▒_____________________▒└──────┘  ║      │              ______________________________________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
▒▒▒▒_____________________▒          ║      │              ▒_____________________________________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒_____________▒════  ════╝      │              ▒______________________________________    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒_____________▒┐                │              ▒______________________________________                               ▒_____________________
▒▒▒▒_____________________▒│@              @│@             ▒_____________________________________▒                   ┌───────────▒_____________________
▒▒▒▒_____________________▒┘                │              ▒_____________________________________▒                           @   ▒_____________________
▒▒▒▒_____________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________▒▒▒▒____
▒▒▒▒__________________________________________________________________________________________________________________________________________▒▒▒▒____
______________________________________________________________________________________________________________________________________________▒▒▒▒____
______________________________________________________________________________________________________________________________________________▒▒▒▒____
______________________________________________________________________________________________________________________________________________▒▒▒▒____
▒▒▒▒_______________▒▒▒▒___________________________________________________▒▒▒▒_________________________________▒▒▒▒___________________________▒▒▒▒____
▒▒▒▒_______________▒▒▒▒___________________________________________________▒▒▒▒_________________________________▒▒▒▒___________________________________
▒▒▒▒_______________▒▒▒▒___________________________________________________▒▒▒▒_________________________________▒▒▒▒___________________________▒▒▒▒____
▒▒▒▒_______________▒▒▒▒___________________________________________________▒▒▒▒_________________________________▒▒▒▒___________________________▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
______________________________________________________________________________________________________________________________________________________
"#;



pub struct Settlement {
    stype: Settle,
    sname: String,
    pos: (i128, i128),
    npcs: HashMap<(usize, usize), NPCWrap>,
    shops: HashMap<Shops, Shop>,
    map: Vec<Vec<Cells>>,
}

const palette: &str = "empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ═ ║ ╣ ╠ ╩ ╦ ╗ ╝ ╚ ╔ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │ ≡ ° × ¤ ¸ ¨ · ■ ¦ ± ¡ ø Ø ©";

fn parse_map(s_map: &str) -> Vec<Vec<Cells>> {
    // let mut cells: Vec<Vec<Cells>> = Vec::new();
    let mut cells = vec![vec![Cells::Null; 150]; 50];
    for (y, line) in s_map.lines().skip(1).enumerate() {
        for (x, ch) in line.chars().enumerate() {
            let cell = match ch {
                '_' => Cells::Empty,
                '▒' => Cells::Wall,
                ' ' => Cells::Floor,
                '~' => Cells::Water,
                '═' => Cells::MwH,
                '║' => Cells::MwV,
                '╣' => Cells::MwVL,
                '╠' => Cells::MwVR,
                '╩' => Cells::MwHU,
                '╦' => Cells::MwHD,
                '╝' => Cells::MwUL,
                '╚' => Cells::MwUR,
                '╗' => Cells::MwDL,
                '╔' => Cells::MwDR,
                '╬' => Cells::MwCR,
                '─' => Cells::SwH,
                '│' => Cells::SwV,
                '┤' => Cells::SwVL,
                '├' => Cells::SwVR,
                '┴' => Cells::SwHU,
                '┬' => Cells::SwHD,
                '┘' => Cells::SwUL,
                '└' => Cells::SwUR,
                '┐' => Cells::SwDL,
                '┌' => Cells::SwDR,
                '┼' => Cells::SwCR,
                '≡' => Cells::Cong,
                '°' => Cells::Deg,
                '×' => Cells::Mult,
                '¸' => Cells::Ced,
                '¨' => Cells::Diae,
                '·' => Cells::Inter,
                '■' => Cells::Blsq,
                '¦' => Cells::VBrk,
                '±' => Cells::PlMin,
                'ø' => Cells::SmZer,
                'Ø' => Cells::BZer,
                '©' => Cells::Cop,
                '@' => Cells::NPCM,
                '{' => Cells::LBrce,
                '}' => Cells::RBrce,
                '(' => Cells::LParen,
                ')' => Cells::RParen,
                '¤' => Cells::GenCur,
                _ => Cells::Empty,
            };
            cells[y][x] = cell;
        }
    }
    cells
}

impl Settlement {
    pub fn new(stype: Settle, sname: String, pos: (i128, i128), npcs: HashMap<(usize, usize), NPCWrap>, shops: HashMap<Shops, Shop>, map: Vec<Vec<Cells>>) -> Self {
        Self {stype, sname, pos, npcs, shops, map}
    }

    pub fn demo_settle(pos: (i128, i128), npcs: HashMap<(usize, usize), NPCWrap>) -> Self {
        let map = parse_map(cave_o);
        let mut shops = HashMap::new();
        let mut cnv = HashMap::new();
        cnv.insert("open".to_string(), "Hey there!".to_string());
        let npc = new_shop_npc("Janiel".to_string(), 0, 0, cnv);
        let npc_b = NPCWrap::ShopNPC(npc);
        let mut stock = Vec::new();
        let ti1 = Item::new_edible_root(0, 0);
        stock.push(ti1);
        let shop = Shop::new_item_shop("item shop".to_string(), npc_b, stock);
        shops.insert(Shops::Item, shop);
        Self {
            stype: Settle::Small,
            sname: "DemoTown".to_string(),
            pos: pos,
            npcs: npcs,
            shops: shops,
            map: map,
        }
    }
}
