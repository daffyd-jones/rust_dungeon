//settlement rs
use crate::enums::{Settle, Cells, NPCWrap};
use crate::shop::{Shop};
use crate::enums::Shops;
use crate::npc::{new_shop_npc, new_comm_npc};
use crate::item::Item;

use std::collections::HashMap;

const large_settlement_empty: &str = r#".
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
"#;

const twn: &str = r#"| empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ╣ ║ ╗ ╝ ╚ ╔ ╩ ╦ ╠ ═ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_______________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________________________________________________________________________________________________________________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒__________________________________________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒__________________________________________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_______________________║____║_______║_________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒══════════__═══════════╝____╚═══════╩════════__═══════▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒════════════════════════════╬═════════__══════════▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒═══════════════════════════════____═══════════════════▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_____________________│________________________________▒___________________▒_______________________┌─┐__║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒┬──┬──┬──┬──┬──┬──┬──┘____________┼____┼____┼____┼____▒___________________▒_______________________│____║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒__________________________________│____│____│____│____▒___________________▒_______________________│____║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒__________________________________┼____┼____┼____┼____▒___________________▒_______________________│____║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒__________________________________│____│____│____│____▒___________________▒_______________________│__________________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒__________________________________┼____┼____┼____┼____▒___________________▒_______________________│__________________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒_______________________│____║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________________________________
_______________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________00______________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
______________________________________________________________________________________________________________________________░░░░░░________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
_____________________________________________________________________________________________________________________________░░░░░▓░░_______________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
___________________________________________________________'','','','','','','','','','',____________________________________░░░▓░░░░░______________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
___________________________________________________________',,',,',,',,',,',,',,',,',,','','',_______________________________░░░░▓░░░░______________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒__▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒__▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________________________________________
___________________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,','','',___________________________░░░░░▓░░_______________________________________________________________________________________________________________________________________________________________________
______________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,'','',______________________░░░░░░_______________________________________________________________________________________________________________________________________________________________________________________________________________
___________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,'',_______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~','',_______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~','''',_____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',','','',___________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,'','','','',____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,',,''','','','',________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒__▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,',,','',______________________________________▒_________________________________________▒_________▒_______________________________________▒_________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,'',___________________________________▒_________________________________________▒_________▒_______________________________________▒____________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',____________________________________▒_________________________________________▒_________▒_______________________________________▒______________________________________________________________________________________________________________________________
_______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',,____________________________________▒_________________________________________▒_________▒_______________________________________▒_____________________________________________________________________________________________________________________________
_______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,_____________________________________▒_________________________________________▒_________▒_______________________________________▒_____________________________________________________________________________________________________________________________
_______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',_____________________________________▒_________________________________________▒_________▒_______________________________________▒_____________________________________________________________________________________________________________________________
________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,_____________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________________________________________________________________________________________________
_________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
__________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',',,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
___________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',',,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_____________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'','','',',,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
________________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'','',''',,',,',,,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
___________________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'','','','',',,',,',,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
________________________________________________________________________________________________________',,',,',,',,_________________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___________________________________________________________________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
"#;

const chnk: &str = r#"| empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ╣ ║ ╗ ╝ ╚ ╔ ╩ ╦ ╠ ═ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
"#;

const gg: &str = r#"
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
_____________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________
_____________▒_______________________║______________________________▒_______________________________
_____________▒_______________________║______________________________▒_______________________________
_____________▒______________________________________________________▒___┌┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┐____
_____________▒______________________________________________________▒___├______________________┤____
_____________▒_______________________║______________________________▒___├____***_________##____┤____
_____________▒_______________________║______________________________▒___├____**__________||____┤____
_____________▒═══════════__══════════╩══════════════════╗___________▒___├______________________┤____
_____________▒__________________________________________║___________▒___├______________________┤____
_____________▒__________________________│_______________║___________▒___├______________________┤____
_____________▒──────────────────────────┘_______┼___┼___║___________▒___├______________________┤____
_____________▒__________________________________│___│___║___________▒___├______________________┤____
_____________▒__________________________________│___│___║___________▒___├______________________┤____
_____________▒__________________________________┼___┼___║___________▒___├______________________┤____
_____________▒__________________________________________║___________▒___├______________________┤____
_____________▒_├_┤_├_┤_├_┤_├_┤_├_┤_├_┤__________________║___________▒___├______________________┤____
_____________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___├┬┬┬┬┬┬─┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┤____
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
"#;

const q: &str =
r#"| empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ╣ ║ ╗ ╝ ╚ ╔ ╩ ╦ ╠ ═ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
_________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║___________________________________________________
_________________________________▒______________║___________________________________________________
_________________________________▒______________║___________________________________________________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
"#;


const smt: &str =
r#"|
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
_____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║______________________________________________________
_____▒______________║______________________________________________________
_____▒______________║______________________________________________________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒______________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
"#;








// med: 300x200 sm: 150x100 | sm: 4(75)x4(25)

const sm_is1: &str =
r#"|
___________________________________________________________________________
___________________________________________________________________________
,·,.'__,.'·,.'·,.'__'·,.'·,,.'·,.'·,.'__,.'·,.'·,.'________________________
__,··,·,.'·,.'·,.',,.'·,.'·,.'·,.'·,.',.,.'·,.'·,.'',.'·,.'·,.'·___________
__,··',.'·,.'·,.'·,,.'·,.'·,.'.'·,.'·,.'·,.'·,.'·,.',.'·,.'·,¨¸.'__________
·,.'·▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒,.·¨¸_________
,·,.'▒o  o≡    ≡≡≡  ║         │     ─┬─   ─┬─   ─┬─   ─┬─   ▒,.··__________
·,,··▒≡ ≡≡≡ ≡≡    ≡≡║               o│o   o│o   o│o   o│o   ▒,.'___________
__,··▒≡     ≡≡≡≡≡ ≡ ║               o│o   o│o   o│o   o│o   ▒·_____________
·,.'·▒ ≡≡≡≡≡≡     ≡ ║         │     o│o   o│o   o│o   o│o   ▒,.'___________
,·,.'▒    ≡≡≡ ≡≡≡≡ ≡║         │     ─┴─   ─┴─   ─┴─   ─┴─   ▒¨¸·___________
__,··▒  ≡     ≡≡≡   ║         │     @                       ▒,.·'__________
_·,··▒  ≡≡≡≡≡≡≡               │                             ▒·_,.'_________
·,.'·▒                        │                             _,·.'__________
,·,.'▒              ║         │                             _·,.'__________
_·,··▒              ║         │                             _,·.'__________
__,··▒══════  ══════╣┐        │                             ▒·,.'__________
·,.'·▒┐             ║│@       │                ┌─   ─┬─   ─┐▒,.'___________
,·,.'▒│             ║│        └───────────────┐│o   o│o   o│▒·,·,·_________
__,··▒│@            ║│                   @    ││o   o│o   o│▒,.'·__________
_·,··▒┘             ║┘                        │└─────┴─────┘▒,·,.'_________
·,.'·▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒,··,.'________
,·,·,·,·,·,·,·,·,·,·,·,·,·,··,.'·,.'·,.'·,.'·,.'·,.',·,·,··,..'.''_________
··,.',.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'···____________
___________________________________________________________________________
"#;


const sm_is2: &str =
r#"|
___________________________________________________________________________
___________________________________________________________________________
__',¨.',·¨.'¨.',·¨.'¨.',·¨.',¨.',·¨.',¨.',·¨.______________________________
_.',▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒¨.',·¨.'¨.',·¨.'¨.',·¨.'_________________________
__',▒    ─┬─  ─┬─  ─┬─   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒.',·¨________________________
_.',_    o│o  o│o  o│o   ▒       ≡≡   ≡      ▒¨.',·________________________
_·',_    o│o  o│o  o│o   ▒ ≡≡≡≡≡    ≡ ≡ ≡≡≡≡ ▒.',·¨________________________
_¨',▒    o│o  o│o  o│o   ▒     ≡≡≡≡≡≡   ≡≡≡  ▒¨.',·________________________
_.',▒    o│o  o│o  o│o   ▒≡≡≡≡     ≡≡≡≡≡≡≡≡ ≡▒¨.',__┌┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┐_____
',',▒    ─┴─  ─┴─  ─┴─   ▒≡≡≡≡≡≡≡≡ ≡      ≡ ≡▒.',___├_*__________¸_¸_┤_____
,.',▒                    ▒≡≡≡≡≡≡≡≡ ≡ ≡≡≡≡ ≡  ▒¨.',__├_**_________·¸·¸┤_____
_·',▒                    ▒≡≡≡≡≡≡     ≡    ≡≡o▒.',·¨_├____________¨·¨·┤_____
_¨',▒                    ▒▒▒▒▒▒▒▒▒▒▒▒▒ ▒▒▒▒▒▒▒¨.',·_├_____________·¸¨┤_____
_.',▒   ┌────────────────▒.',·¨.',·¨.',·¨.',·¨.',·¨_├_____________¨·¸┤_____
_·',▒   │              @ ▒¨.'_.',·¨.',·¨.',·¨.',·¨.'├_____________¸¨·┤_____
_·',▒                    ▒¨.'¨.┌┬┬┬┬┬_┬┬┬┬┬┬┬┬┬┬┬┬┬┬┤_____________·¸¨┤_____
_¨',▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒¨.·__├__________________________________¨·¸┤_____
.',.',·¨.',·¨.',·¨.',·¨.',··¨¨_├__________________________________¸¨¸┤_____
.',·¨.',·¨.',·¨.',·¨.',·¨.'¨___├__________________________________·_·┤_____
_______________________________├__________________________________¨_¨┤_____
_______________________________├┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┤_____
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
"#;

const pal: &str = "empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ═ ║ ╣ ╠ ╩ ╦ ╗ ╝ ╚ ╔ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │ ≡ ° × ¤ ¸ ¨ · ■ ¦ ± ¡ ø Ø ©";

const sm_is3: &str =
r#"|
___________________________________________________________________________
___________________________________________________________________________
________________________▒▒▒Ø▒▒Ø▒▒Ø▒▒Ø▒▒Ø▒▒Ø▒▒Ø▒▒Ø▒▒▒_______________________
________________________▒▒ ░  ░  ░  ░  ░  ░  ░  ░ ▒▒_______________________
________________________▒▒                        ▒▒_______________________
________________________▒▒ ╔════════════════════╗ ▒▒_______________________
________________▒▒▒▒▒▒Ø▒▒▒ ║░░░░░░░░░░░░░░░░░░░░║ ▒▒▒Ø▒▒▒▒▒________________
________________▒▒         ║░░░░░░░░░░░░░░░░░░░░║        ▒▒________________
________________▒▒         ╚════════════════════╝        ▒▒________________
________________▒▒                                       ▒▒________________
________________▒▒                                       ▒▒________________
________________▒▒                                       ▒▒________________
________________▒▒                                       ▒▒________________
________________▒▒                                       ▒▒________________
________________                                         ▒▒________________
________________                                         ▒▒________________
________________▒▒                                       ▒▒________________
________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
"#;







const a: &str = r#" empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ╣ ║ ╗ ╝ ╚ ╔ ╩ ╦ ╠ ═ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
"#;


const cave_o: &str = r#"CommNPC CommNPC CommNPC CommNPC CommNPC CommNPC CommNPC CommNPC CommNPC|EdibleRoot EdibleRoot EdibleRoot EdibleRoot EdibleRoot EdibleRoot EdibleRoot EdibleRoot EdibleRoot EdibleRoot|
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_________________________________▒▒▒▒_____________________________________▒▒▒▒____
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_________________________________▒▒▒▒_____________________________________▒▒▒▒____
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_________________________________▒▒▒▒_____________________________________▒▒▒▒____
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_________________________________▒▒▒▒_____________________________________▒▒▒▒____
▒▒▒▒__________________________________________________________________________________________________________________________________________▒▒▒▒____
▒▒▒▒__________________________________________________________________________________________________________________________________________▒▒▒▒____
▒▒▒▒__________________________________________________________________________________________________________________________________________▒▒▒▒____
▒▒▒▒__________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________________________________________________________________▒▒▒▒____
______________________________▒                                      ▒________________________________________________________________________________
______________________________▒                                      ▒________________________________________________________________________________
▒▒▒▒__________________________▒                                      ▒________________________________________________________________________________
▒▒▒▒__________________________▒                                      ▒________________________________________________________________________________
▒▒▒▒__________________________▒═══════════════════════════════   ════▒________________________________________________________________________▒▒▒▒____
▒▒▒▒__________________________▒  o│o  o│o  o│o              @        ▒________________________________________________________________________▒▒▒▒____
______________________________▒  ─┼─  ─┼─  ─┴─      └────────────────▒________________________________________________________________________▒▒▒▒____
______________________________▒  o│o  o│o                            ▒________________________________________________________________________▒▒▒▒____
______________________________▒                                      ▒_____________├┤_________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒____
______________________________▒                                      ▒____________,├┤,________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒____
______________________________▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________,..,________________________________________________________▒▒▒▒____
________________________________________________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________▒▒▒▒____
________________________________________________________________________________@_______________▒    │°  ╚══════════════╝ °│    ▒_____________▒▒▒▒____
________________________________________________________________________________________________▒    │°   ≡ø≡  ±©±  ≡ø≡   °│    ▒_____________▒▒▒▒____
________________________________________________________________________________________________▒    └─────────────────────┘    ▒_____________▒▒▒▒____
________________________________________________________________________________________________▒    ░░░░░░░░░░░░░░░░░░░░░░░@   ▒_____________▒▒▒▒____
_________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________▒    ░░░░░░░░░░░░░░░░░░░░░░░    ▒_____________▒▒▒▒____
_________________________▒┌──────┐  ║      │   └──────┘   ▒________________┌_____┐______________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
_________________________▒└──────┘  ║      ┘              ▒______________@_│{(¤)}│______________▒    └───────┘░░░░░└───────┘    ▒_____________________
_________________________▒┌──────┐  ║                @    ▒________________├┴─┬─┴┤______________▒    └───────┘░░░░░└───────┘    ▒_____________________
_________________________▒└──────┘  ║      ┐              ▒_____________________________________▒    └───────┘░░░░░└───────┘    ▒_____________________
_________________________▒┌──────┐  ║      │              ______________________________________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
▒▒▒▒_____________________▒└──────┘  ║      │              ______________________________________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
▒▒▒▒_____________________▒          ║      │              ▒_____________________________________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒_____________▒════  ════╝      │              ▒______________________________________    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒_____________▒┐                │              ▒______________________________________                               ▒_____________________
▒▒▒▒_____________________▒│@              @│@             ▒_____________________________________▒                   ┌───────────▒_____________________
▒▒▒▒_____________________▒┘                │              ▒_____________________________________▒                           @   ▒_____________________
▒▒▒▒_____________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________▒▒▒▒____
▒▒▒▒__________________________________________________________________________________________________________________________________________▒▒▒▒____
______________________________________________________________________________________________________________________________________________▒▒▒▒____
______________________________________________________________________________________________________________________________________________▒▒▒▒____
______________________________________________________________________________________________________________________________________________▒▒▒▒____
▒▒▒▒_______________▒▒▒▒___________________________________________________▒▒▒▒_________________________________▒▒▒▒___________________________▒▒▒▒____
▒▒▒▒_______________▒▒▒▒___________________________________________________▒▒▒▒_________________________________▒▒▒▒___________________________________
▒▒▒▒_______________▒▒▒▒___________________________________________________▒▒▒▒_________________________________▒▒▒▒___________________________▒▒▒▒____
▒▒▒▒_______________▒▒▒▒___________________________________________________▒▒▒▒_________________________________▒▒▒▒___________________________▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
______________________________________________________________________________________________________________________________________________________
"#;




const palette: &str = "empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ═ ║ ╣ ╠ ╩ ╦ ╗ ╝ ╚ ╔ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │ ≡ ° × ¤ ¸ ¨ · ■ ¦ ± ¡ ø Ø ©";

fn parse_map(s_map: &str) -> (Vec<Vec<Cells>>, HashMap<(usize, usize), NPCWrap>) {
    // let mut cells: Vec<Vec<Cells>> = Vec::new();
    let mut map_codet = s_map.clone().lines().next().unwrap_or("");
    let mut map_code: Vec<&str> = map_codet.split("|").collect();
    let mut cells = vec![vec![Cells::Null; 150]; 50];
    let mut npcs = HashMap::new();
    // let mut items = HashMap::new();
    for (y, line) in s_map.lines().skip(1).enumerate() {
        for (x, ch) in line.chars().enumerate() {
            let cell = match ch.clone() {
                '_' => Cells::Empty,
                ',' => Cells::Grass1,
                '\'' => Cells::Grass2,
                '·' => Cells::Dirt1,
                '.' => Cells::Dirt2,
                '*' => Cells::Rock,
                '▒' => Cells::Wall,
                ' ' => Cells::Floor,
                '░' => Cells::Floor2,
                '~' => Cells::Water,
                '═' => Cells::MwH,
                '║' => Cells::MwV,
                '╣' => Cells::MwVL,
                '╠' => Cells::MwVR,
                '╩' => Cells::MwHU,
                '╦' => Cells::MwHD,
                '╝' => Cells::MwUL,
                '╚' => Cells::MwUR,
                '╗' => Cells::MwDL,
                '╔' => Cells::MwDR,
                '╬' => Cells::MwCR,
                '─' => Cells::SwH,
                '│' => Cells::SwV,
                '┤' => Cells::SwVL,
                '├' => Cells::SwVR,
                '┴' => Cells::SwHU,
                '┬' => Cells::SwHD,
                '┘' => Cells::SwUL,
                '└' => Cells::SwUR,
                '┐' => Cells::SwDL,
                '┌' => Cells::SwDR,
                '┼' => Cells::SwCR,
                '≡' => Cells::Cong,
                '°' => Cells::Deg,
                '×' => Cells::Mult,
                '¸' => Cells::Ced,
                '¨' => Cells::Diae,
                '·' => Cells::Inter,
                '■' => Cells::Blsq,
                '¦' => Cells::VBrk,
                '±' => Cells::PlMin,
                'ø' => Cells::SmZer,
                'Ø' => Cells::BZer,
                '©' => Cells::Cop,
                // '@' => Cells::NPCM,
                '{' => Cells::LBrce,
                '}' => Cells::RBrce,
                '(' => Cells::LParen,
                ')' => Cells::RParen,
                '¤' => Cells::GenCur,
                _ => Cells::Empty,
            };
            cells[y.clone()][x.clone()] = cell.clone();
            if ch.clone() == '@' {
                let npc_types: Vec<&str> = map_code.clone()[0].split(" ").collect();
                for t in npc_types {
                    match t {
                        "CommNPC" => {
                            let comms = vec!["Welcome to the caves!!".to_string(), "Theres a tonne of folk down here, lerger cities as you go into the cave.".to_string()];
                            let t_comm = new_comm_npc("Kevthony".to_string(), x.clone(), y.clone(), comms.clone());
                            npcs.insert((x.clone(), y.clone()), NPCWrap::CommNPC(t_comm.clone()));
                        },
                        _ => todo!(),
                    }
                }
            }
            // if ch.clone() == 'o' {
            //     let item_types = map_code.clone()[0].split(" ").collect();
            //     for i in item_types {
            //         match i {
            //             "EdibleRoot" => {
            //                 let t_root = Item::new_edible_root(x.clone(), y.clone());
            //                 items.insert((x.clone(), y.clone()), t_root.clone());
            //             },
            //             // "MetalScrap" => {
            //             //     let t_scrap = Item::new_metal_scrap(x.clone(), y.clone());
            //             //     items.insert((x.clone(), y.clone()), t_root.clone());
            //             // },
            //             _ => todo!(),
            //         }
            //     }
            // }
        }
    }
    (cells, npcs)
}

#[derive(Clone, Debug, PartialEq)]
pub struct Settlement {
    stype: Settle,
    sname: String,
    pos: (i64, i64),
    npcs: HashMap<(usize, usize), NPCWrap>,
    npcs_sent: bool,
    shops: HashMap<Shops, Shop>,
    map: Vec<Vec<Cells>>,
}

impl Settlement {
    pub fn new(stype: Settle, sname: String, pos: (i64, i64), npcs: HashMap<(usize, usize), NPCWrap>, shops: HashMap<Shops, Shop>, map: Vec<Vec<Cells>>) -> Self {
        Self {stype, sname, pos, npcs, npcs_sent: false, shops, map}
    }

    pub fn demo_settle(pos: (i64, i64), npcs: HashMap<(usize, usize), NPCWrap>) -> Self {
        let (map, mpcs) = parse_map(cave_o);
        let mut shops = HashMap::new();
        let mut cnv = HashMap::new();
        cnv.insert("open".to_string(), "Hey there!".to_string());
        let npc = new_shop_npc("Janiel".to_string(), 0, 0, cnv);
        let npc_b = NPCWrap::ShopNPC(npc);
        let mut stock = Vec::new();
        let ti1 = Item::new_edible_root(0, 0);
        stock.push(ti1);
        let shop = Shop::new_item_shop("item shop".to_string(), npc_b, stock);
        shops.insert(Shops::Item, shop);
        Self {
            stype: Settle::Small,
            sname: "DemoTown".to_string(),
            pos: pos,
            npcs: mpcs,
            npcs_sent: false,
            shops: shops,
            map: map,
        }
    }

    pub fn get_pos(&mut self) -> (i64, i64) {
        self.pos.clone()
    }

    pub fn set_pos(&mut self, tpos: (i64, i64)) {
        self.pos = tpos;
    }

    pub fn get_npcs(&mut self) -> HashMap<(usize, usize), NPCWrap> {
        self.npcs.clone()
    }

    pub fn get_npcs_sent(&mut self) -> bool {
        self.npcs_sent.clone()
    }

    pub fn tog_npcs_sent(&mut self) {
        self.npcs_sent = !self.npcs_sent;
    }

    pub fn get_shops(&mut self) -> HashMap<Shops, Shop> {
        self.shops.clone()
    }

    pub fn get_map(&mut self) -> Vec<Vec<Cells>> {
        self.map.clone()
    }
}
