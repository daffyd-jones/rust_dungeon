//settlement rs
use crate::enums::{Settle, Cells, NPCWrap};
use crate::shop::{Shop};
use crate::enums::{Shops};
use crate::npc::{new_shop_npc, new_comm_npc, new_conv_npc, Convo, ShopData, ShopConvos};
use crate::item::Item;
use rand::prelude::SliceRandom;
use rand::Rng;

//use serde::{Deserialize, Serialize};
//use serde_json::Result;
//use serde_json::Value;
use std::fs;


use std::collections::HashMap;

const large_settlement_empty: &str = r#".
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
"#;

const twn: &str = r#"| empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ╣ ║ ╗ ╝ ╚ ╔ ╩ ╦ ╠ ═ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_______________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________________________________________________________________________________________________________________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒__________________________________________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_______________________║____________║_________________▒___________________▒__________________________________________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_______________________║____║_______║_________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒══════════__═══════════╝____╚═══════╩════════__═══════▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒════════════════════════════╬═════════__══════════▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒═══════════════════════════════____═══════════════════▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒____________________________║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒_____________________│________________________________▒___________________▒_______________________┌─┐__║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒┬──┬──┬──┬──┬──┬──┬──┘____________┼____┼____┼____┼____▒___________________▒_______________________│____║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒__________________________________│____│____│____│____▒___________________▒_______________________│____║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒__________________________________┼____┼____┼____┼____▒___________________▒_______________________│____║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒__________________________________│____│____│____│____▒___________________▒_______________________│__________________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒__________________________________┼____┼____┼____┼____▒___________________▒_______________________│__________________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒_______________________│____║_____________________▒_____▒________________________________________________▒_______________________________________________________
_______________________________________________________________▒______________________________________________________▒___________________▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________________________________
_______________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
____________________________________________________________________________________________________________________________________________________00______________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
______________________________________________________________________________________________________________________________░░░░░░________________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
_____________________________________________________________________________________________________________________________░░░░░▓░░_______________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
___________________________________________________________'','','','','','','','','','',____________________________________░░░▓░░░░░______________________________________▒_____________________________________▒____________▒___________________________________▒____________________________________________
___________________________________________________________',,',,',,',,',,',,',,',,',,','','',_______________________________░░░░▓░░░░______________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒__▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒__▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________________________________________
___________________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,','','',___________________________░░░░░▓░░_______________________________________________________________________________________________________________________________________________________________________
______________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,'','',______________________░░░░░░_______________________________________________________________________________________________________________________________________________________________________________________________________________
___________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,'',_______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~','',_______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~','''',_____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',','','',___________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,'','','','',____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,',,''','','','',________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒__▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,',,',,','',______________________________________▒_________________________________________▒_________▒_______________________________________▒_________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,'',___________________________________▒_________________________________________▒_________▒_______________________________________▒____________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,___________________________________▒_________________________________________▒_________▒_______________________________________▒_______________________________________________________________________________________________________________________________
______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',____________________________________▒_________________________________________▒_________▒_______________________________________▒______________________________________________________________________________________________________________________________
_______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',,____________________________________▒_________________________________________▒_________▒_______________________________________▒_____________________________________________________________________________________________________________________________
_______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,_____________________________________▒_________________________________________▒_________▒_______________________________________▒_____________________________________________________________________________________________________________________________
_______________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',_____________________________________▒_________________________________________▒_________▒_______________________________________▒_____________________________________________________________________________________________________________________________
________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~',,_____________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________________________________________________________________________________________________
_________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
__________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',',,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
___________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'',',,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
_____________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'','','',',,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
________________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'','',''',,',,',,,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
___________________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'','','','',',,',,',,______________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
________________________________________________________________________________________________________',,',,',,',,_________________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___________________________________________________________________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒_________________________________________▒____________________________________________________________________________
_____________________________________________________________________________________________________________________________________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
____________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________________
"#;

const chnk: &str = r#"| empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ╣ ║ ╗ ╝ ╚ ╔ ╩ ╦ ╠ ═ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
"#;

const a: &str = r#" empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ╣ ║ ╗ ╝ ╚ ╔ ╩ ╦ ╠ ═ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
______________________________________________________________________________________________________________________________________________________
"#;


const gg: &str = r#"
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
_____________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________
_____________▒_______________________║______________________________▒_______________________________
_____________▒_______________________║______________________________▒_______________________________
_____________▒______________________________________________________▒___┌┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┐____
_____________▒______________________________________________________▒___├______________________┤____
_____________▒_______________________║______________________________▒___├____***_________##____┤____
_____________▒_______________________║______________________________▒___├____**__________||____┤____
_____________▒═══════════__══════════╩══════════════════╗___________▒___├______________________┤____
_____________▒__________________________________________║___________▒___├______________________┤____
_____________▒__________________________│_______________║___________▒___├______________________┤____
_____________▒──────────────────────────┘_______┼___┼___║___________▒___├______________________┤____
_____________▒__________________________________│___│___║___________▒___├______________________┤____
_____________▒__________________________________│___│___║___________▒___├______________________┤____
_____________▒__________________________________┼___┼___║___________▒___├______________________┤____
_____________▒__________________________________________║___________▒___├______________________┤____
_____________▒_├_┤_├_┤_├_┤_├_┤_├_┤_├_┤__________________║___________▒___├______________________┤____
_____________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___├┬┬┬┬┬┬─┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┤____
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
"#;

const q: &str =
r#"| empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ╣ ║ ╗ ╝ ╚ ╔ ╩ ╦ ╠ ═ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
_________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║___________________________________________________
_________________________________▒______________║___________________________________________________
_________________________________▒______________║___________________________________________________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒______________║_______________________________________▒___________
_________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
____________________________________________________________________________________________________
"#;


const smt: &str =
r#"|
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
_____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║______________________________________________________
_____▒______________║______________________________________________________
_____▒______________║______________________________________________________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒______________║_______________________________________▒______________
_____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒______________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
"#;








// med: 300x200 sm: 150x100 | sm: 2(75)x2(25) med: 3(75)x3(25)

const itm_sh1: &str =
r#"CommNPC CommNPC CommNPC ShopNPC|HealthPotion HealthPotion HealthPotion Salve Salve Dowel WoodenBoard Apple Apple Apple HealthPotion HealthPotion HealthPotion HealthPotion HealthPotion Salve Salve Dowel WoodenBoard Apple Apple Apple HealthPotion HealthPotion HealthPotion Salve Salve Dowel WoodenBoard Apple Apple Apple|HealthPotion
___________________________________________________________________________
___________________________________________________________________________
,·,.'__,.'·,.'·,.'__'·,.'·,,.'·,.'·,.'__,.'·,.'·,.'________________________
__,··,·,.'·,.'·,.',,.'·,.'·,.'·,.'·,.',.,.'·,.'·,.'',.'·,.'·,.'·___________
__,··',.'·,.'·,.'·,,.'·,.'·,.'.'·,.'·,.'·,.'·,.'·,.',.'·,.'·,¨¸.'__________
·,.'·▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒,.·¨¸_________
,·,.'▒   O≡    ≡≡≡  ║         │     ─┬─   ─┬─   ─┬─   ─┬─   ▒,.··__________
·,,··▒≡ ≡≡≡ ≡≡    ≡≡║               o│o   o│o   o│o   o│o   ▒,.'___________
__,··▒≡     ≡≡≡≡≡ ≡ ║               o│o   o│o   o│o   o│o   ▒·_____________
·,.'·▒ ≡≡≡≡≡≡     ≡ ║         │     o│o   o│o   o│o   o│o   ▒,.'___________
,·,.'▒    ≡≡≡ ≡≡≡≡ ≡║         │     ─┴─   ─┴─   ─┴─   ─┴─   ▒¨¸·___________
__,··▒  ≡     ≡≡≡   ║         │     @                       ▒,.·'__________
_·,··▒  ≡≡≡≡≡≡≡               │                             ▒·_,.'_________
·,.'·▒                        │                             _,·.'__________
,·,.'▒              ║         │                             _·,.'__________
_·,··▒              ║         │                             _,·.'__________
__,··▒══════  ══════╣┐        │                             ▒·,.'__________
·,.'·▒┐             ║│@       │                ┌─   ─┬─   ─┐▒,.'___________
,·,.'▒│             ║│        └───────────────┐│o   o│o   o│▒·,·,·_________
__,··▒│@            ║│                   @    ││o   o│o   o│▒,.'·__________
_·,··▒┘             ║┘                        │└─────┴─────┘▒,·,.'_________
·,.'·▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒,··,.'________
,·,·,·,·,·,·,·,·,·,·,·,·,·,··,.'·,.'·,.'·,.'·,.'·,.',·,·,··,..'.''_________
··,.',.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'·,.'···____________
___________________________________________________________________________
"#;


const itm_sh2: &str =
r#"ShopNPC ConvNPC|HealthPotion HealthPotion HealthPotion Salve Salve Dowel WoodenBoard Apple Apple Apple HealthPotion HealthPotion HealthPotion HealthPotion HealthPotion Salve Salve Dowel HealthPotion HealthPotion HealthPotion Salve Salve Dowel|HealthPotion
___________________________________________________________________________
___________________________________________________________________________
__',¨.',·¨.'¨.',·¨.'¨.',·¨.',¨.',·¨.',¨.',·¨.______________________________
_.',▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒¨.',·¨.'¨.',·¨.'¨.',·¨.'_________________________
__',▒    ─┬─  ─┬─  ─┬─   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒.',·¨________________________
_.',_    o│o  o│o  o│o   ▒     ≡≡≡≡   ≡      ▒¨.',·________________________
_·',_    o│o  o│o  o│o   ▒ ≡≡≡ ≡    ≡ ≡ ≡≡≡≡ ▒.',·¨________________________
_¨',▒    o│o  o│o  o│o   ▒   ≡ ≡ ≡≡≡≡   ≡≡≡  ▒¨.',·________________________
_.',▒    o│o  o│o  o│o   ▒≡≡ ≡   ≡≡≡≡≡≡≡≡≡≡ ≡▒¨.',__┌┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┐_____
',',▒    ─┴─  ─┴─  ─┴─   ▒   ≡≡≡≡≡≡≡      ≡  ▒.',___├_*__________¸_¸_┤_____
,.',▒                    ▒ ≡≡≡≡    ≡ ≡≡≡≡ ≡≡ ▒¨.',__├_**_________·¸·¸┤_____
_·',▒                    ▒      ≡≡   ≡    ≡O ▒.',·¨_├____________¨·¨·┤_____
_¨',▒                    ▒▒▒▒▒▒▒▒▒▒▒▒▒ ▒▒▒▒▒▒▒¨.',·_├_____________·¸¨┤_____
_.',▒   ┌────────────────▒.',·¨.',·¨.',·¨.',·¨.',·¨_├_____________¨·¸┤_____
_·',▒   │              @ ▒¨.'_.',·¨.',·¨.',·¨.',·¨.'├_____________¸¨·┤_____
_·',▒                    ▒¨.'¨.┌┬┬┬┬┬_┬┬┬┬┬┬┬┬┬┬┬┬┬┬┤_____________·¸¨┤_____
_¨',▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒¨.·__├__________________________________¨·¸┤_____
.',.',·¨.',·¨.',·¨.',·¨.',··¨¨_├__________________________________¸¨¸┤_____
.',·¨.',·¨.',·¨.',·¨.',·¨.'¨___├_____________________________@____·_·┤_____
_______________________________├__________________________________¨_¨┤_____
_______________________________├┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┤_____
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
"#;


const church1: &str =
r#"ConvNPC CommNPC|Null|HealthPotion
___________________________________________________________________________
_________________..',¨.',·¨.',¨.',·¨.',¨.',·¨.,·¨._________________________
_______________¨¨.',·¨.'¨.',·¨.'¨.'.',·¨.'¨.¨.'¨.'_________________________
_______________.',·▒▒▒Ø▒▒Ø▒▒Ø▒▒Ø▒▒Ø▒▒Ø▒▒Ø▒▒Ø▒▒▒.',·¨_______________________
_______________¨.',▒▒ ░  ░  ░  ░  ░  ░  ░  ░ ▒▒¨.',·_______________________
_________·¨,·¨.',··▒▒                        ▒▒.',·,·¨¨____________________
______.',.',·¨.'.',▒▒ ╔════════════════════╗ ▒▒¨.',',···¨.'________________
______··¨.'▒▒▒▒▒▒Ø▒▒▒ ║░░░░░░░░░░░░░░░░░░░░║ ▒▒▒Ø▒▒▒▒▒.',·¨________________
______.',·¨▒▒         ║░░░░░░░░░░░░░░░░░░░░║        ▒▒¨.',·________________
______¨.',·▒▒         ╚════════════════════╝  ┌──┐ ┌▒▒.',·¨________________
______.',·¨▒▒                                 │     ▒▒¨.',·________________
______¨.',·▒▒      @                          │     ▒▒¨.',_________________
______¨.',_▒▒                                 │@    ▒▒.',__________________
______.',__▒▒                        ╔══════════════▒▒¨.',_________________
______¨.',_▒▒                             ≡   ≡   ≡≡▒▒.',·¨________________
______.',·¨                          ║    ≡ ≡ ≡ ≡ ≡O▒▒¨.',·________________
______¨.',·                          ║      ≡   ≡   ▒▒.',·¨________________
______.',·¨▒▒                        ║ ┌──────────┐ ▒▒',·¨.________________
_______·¨,'▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒.',·¨________________
_______',·¨,',·¨.',·¨,·¨.',·¨,·¨.',·¨¨,',·¨.',·¨,·¨.',¨.',·________________
_________¨¨.',·¨.',.',·¨.',.',·¨.',.',·¨¨.',',.',·¨.',_____________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
"#;


const pal: &str = "empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ═ ║ ╣ ╠ ╩ ╦ ╗ ╝ ╚ ╔ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │ ≡ ° × ¤ ¸ ¨ · ■ ¦ ± ¡ ø Ø ©";

const guild1: &str =
r#"ShopNPC CommNPC|Null|HealthPotion
___________________________________________________________________________
___________________________________________________________________________
______▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___┌┬┬┬┬┬┬┬┬┬┬┬┬┐___
______▒_____└________________│________________________▒___├_O__________┤___
______▒_______________________________________________▒___├____________┤___
______▒_____│________________│________________________▒___├____________┤___
______▒_____│________________│________________________▒___├____________┤___
______▒_____│___@____________│________________________▒___├____________┤___
______▒_____└──────────▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒___├____________┤___
______▒_________@______▒__________________________________├____________┤___
______▒________________▒__________________________________├____________┤___
______▒________________▒___┌┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┼____________┤___
______▒▒▒▒▒▒▒▒__▒▒▒▒▒▒▒▒___├___________________________________________┤___
___________________________├___________________________________________┤___
___________________________├___________________________________________┤___
___________________________├┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬__┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┬┤___
___________________________________________________________________________
______________________________________________________~~~~~~~~~~~~~________
_____________________________________________________~~~~~~~~~~~~~~~~______
______________________________________________________~~~~~~~~~~~~~~~~~____
_____________________________________________________~~~~~~~~~~~~~~~~~~~___
____________________________________________________~~~~~~~~~~~~~~~~~~~____
_____________________________________________________~~~~~~~~~~~~~~~~~~____
______________________________________________________~~~~~~~~~~~~~~~______
___________________________________________________________________________
"#;


const anchor1: &str =
r#"CommNPC|Null|Null
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
________@__________________________________________________________________
________________┌_____┐____________________________________________________
________________│{(¤)}│____________________________________________________
________________├┴─┬─┴┤____________________________________________________
___________________________________________________________________________
_______,··',.'·,.'·,.'·,,.'·,.'·,.'.'·,.'·,.'·,.'·,.'·,.',.________________
_____,··',.'·,.'·,.'·,,.'·,.'·,.'.'·,.'·,.'·,.'·,.'·,.',.__________________
___,··',.'·,.'·,.'·,,.'·,.'·,.'.'·,.'·,.'·,.'·,.'·,.',.____________________
__,··',.'·,.'·,.'·,,.'·,.'·,.'.'·,.'·,.'·,.'·,.'·,.________________________
_,··',.'·,.'·,.'·,,.'·,.'·,.'.'·,.'·,.'·,.'·,.'·,_____~~~~~~~~~~~~~________
___,··',.'·,.'·,.'·,,.'·,.'·,.'.'·,.'·,.'·,.'·,._____~~~~~~~~~~~~~~~~______
____,··',.'·,.'·,.'·,,.'·,.'·,.'.'·,.'·,.'·,.'._______~~~~~~~~~~~~~~~~~____
___,··',.'·,.'·,.'·,,.'·,.'·,.'.'·,.'·,.'·,.'·,______~~~~~~~~~~~~~~~~~~~___
_________,··',.'·,.'·,.'·,,.'·,.'·,.'.',.___________~~~~~~~~~~~~~~~~~~~____
________________,··',.'·,.'·,.'·,,.'.________________~~~~~~~~~~~~~~~~~~____
_______________________,··',.'·.______________________~~~~~~~~~~~~~~~______
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
"#;



const item_shops: [&str; 2] = [
    itm_sh1,
    itm_sh2,
];

const guild_shops: [&str; 1]  = [
    guild1,
];

const churches: [&str; 1]  = [
    church1,
];

const anchors: [&str; 1]  = [
    anchor1,
];


const cave_o1: &str = r#"ShopNPC|HealthPotion HealthPotion HealthPotion Salve Salve Dowel WoodenBoard Apple Apple Apple|Apple
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_______
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_______
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_______
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_______
▒▒▒▒_______________________________________________________________________
▒▒▒▒_______________________________________________________________________
▒▒▒▒_______________________________________________________________________
▒▒▒▒__________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____
______________________________▒                                      ▒_____
______________________________▒                                      ▒_____
▒▒▒▒__________________________▒                                      ▒_____
▒▒▒▒__________________________▒                                      ▒_____
▒▒▒▒__________________________▒═══════════════════════════════   ════▒_____
▒▒▒▒__________________________▒  o│o  o│o  o│o              @        ▒_____
______________________________▒  ─┼─  ─┼─  ─┴─      └────────────────▒_____
______________________________▒  o│o  o│o                            ▒_____
______________________________▒                                      ▒_____
______________________________▒                                      ▒_O___
______________________________▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
"#;

const cave_o2: &str = r#"CommNPC|Null|Null
________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
__________________________▒▒▒▒_____________________________________▒▒▒▒____
__________________________▒▒▒▒_____________________________________▒▒▒▒____
__________________________▒▒▒▒_____________________________________▒▒▒▒____
__________________________▒▒▒▒_____~~~~~~~~~_______________________▒▒▒▒____
_______________________________~~~~~~~~~~~~~~~~____________________▒▒▒▒____
________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~________________▒▒▒▒____
____________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~_____________▒▒▒▒____
____________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~_____________▒▒▒▒____
____________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~_____________________
____________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~_____________________
____________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~_____________________
____________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~_____________________
______________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~_________________▒▒▒▒____
___________________________~~~~~~~~~~~~~~~_________________________▒▒▒▒____
_______________________________~~~~~_______________________________▒▒▒▒____
___________________________________________________________________▒▒▒▒____
________├┤_________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒____
_______,├┤,________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒____
_______,..,________________________________________________________▒▒▒▒____
_____________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________▒▒▒▒____
_____@_______________▒    │°  ╚══════════════╝ °│    ▒_____________▒▒▒▒____
_____________________▒    │°   ≡ø≡  ±©±  ≡ø≡   °│    ▒_____________▒▒▒▒____
_____________________▒    └─────────────────────┘    ▒_____________▒▒▒▒____
"#;


const cave_o3: &str = r#"CommNPC CommNPC CommNPC ShopNPC CommNPC|Null|Null
___________________________________________________________________________
_________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________
_________________________▒┌──────┐  ║      │   └──────┘   ▒________________
_________________________▒└──────┘  ║      ┘              ▒______________@_
_________________________▒┌──────┐  ║                @    ▒________________
_________________________▒└──────┘  ║      ┐              ▒________________
_________________________▒┌──────┐  ║      │              _________________
▒▒▒▒_____________________▒└──────┘  ║      │              _________________
▒▒▒▒_____________________▒          ║      │              ▒________________
▒▒▒▒▒▒▒▒▒▒▒▒_____________▒════  ════╝      │              ▒________________
▒▒▒▒▒▒▒▒▒▒▒▒_____________▒┐                │              ▒________________
▒▒▒▒_____________________▒│@              @│@             ▒________________
▒▒▒▒_____________________▒┘                │              ▒________________
▒▒▒▒_____________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________
▒▒▒▒_______________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
___________________________________________________________________________
▒▒▒▒_______________▒▒▒▒___________________________________________________▒
▒▒▒▒_______________▒▒▒▒___________________________________________________▒
▒▒▒▒_______________▒▒▒▒___________________________________________________▒
▒▒▒▒_______________▒▒▒▒___________________________________________________▒
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________▒▒▒▒▒▒▒▒▒▒▒
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________▒▒▒▒▒▒▒▒▒▒▒
___________________________________________________________________________
"#;


const cave_o4: &str = r#"CommNPC ShopNPC|Null|Null
_____________________▒    ░░░░░░░░░░░░░░░░░░░░░░░@   ▒_____________▒▒▒▒____
_____________________▒    ░░░░░░░░░░░░░░░░░░░░░░░    ▒_____________▒▒▒▒____
┌_____┐______________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
│{(¤)}│______________▒    └───────┘░░░░░└───────┘    ▒_____________________
├┴─┬─┴┤______________▒    └───────┘░░░░░└───────┘    ▒_____________________
_____________________▒    └───────┘░░░░░└───────┘    ▒_____________________
_____________________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
_____________________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
_____________________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
______________________    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
______________________                               ▒_____________________
_____________________▒                   ┌───────────▒_____________________
_____________________▒ ┌───────┐                 @   ▒_____________________
_____________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________▒▒▒▒____
___________________________________________________________________▒▒▒▒____
___________________________________________________________________▒▒▒▒____
___________________________________________________________________▒▒▒▒____
___________________________________________________________________▒▒▒▒____
▒▒▒_________________________________▒▒▒▒___________________________▒▒▒▒____
▒▒▒_________________________________▒▒▒▒___________________________________
▒▒▒_________________________________▒▒▒▒___________________________▒▒▒▒____
▒▒▒_________________________________▒▒▒▒___________________________▒▒▒▒____
▒▒▒▒▒▒_________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
▒▒▒▒▒▒_________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
___________________________________________________________________________
"#;


const cave_o: &str = r#"CommNPC CommNPC CommNPC CommNPC CommNPC CommNPC CommNPC CommNPC CommNPC|HealthPotion HealthPotion HealthPotion Salve Salve Dowel WoodenBoard Apple Apple Apple|Apple
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_______________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_________________________________▒▒▒▒_____________________________________▒▒▒▒____
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_________________________________▒▒▒▒_____________________________________▒▒▒▒____
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_________________________________▒▒▒▒_____________________________________▒▒▒▒____
▒▒▒▒_____________________________▒▒▒▒___________________________▒▒▒▒_________________________________▒▒▒▒_____~~~~~~~~~_______________________▒▒▒▒____
▒▒▒▒______________________________________________________________________________________________________~~~~~~~~~~~~~~~~____________________▒▒▒▒____
▒▒▒▒_______________________________________________________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~________________▒▒▒▒____
▒▒▒▒___________________________________________________________________________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~_____________▒▒▒▒____
▒▒▒▒__________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~_____________▒▒▒▒____
______________________________▒                                      ▒_________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~_____________________
______________________________▒                                      ▒_________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~_____________________
▒▒▒▒__________________________▒                                      ▒_________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~_____________________
▒▒▒▒__________________________▒                                      ▒_________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~_____________________
▒▒▒▒__________________________▒═══════════════════════════════   ════▒___________________________~~~~~~~~~~~~~~~~~~~~~~~~~~~~_________________▒▒▒▒____
▒▒▒▒__________________________▒  o│o  o│o  o│o              @        ▒________________________________~~~~~~~~~~~~~~~_________________________▒▒▒▒____
______________________________▒  ─┼─  ─┼─  ─┴─      └────────────────▒____________________________________~~~~~_______________________________▒▒▒▒____
______________________________▒  o│o  o│o                            ▒________________________________________________________________________▒▒▒▒____
______________________________▒                                      ▒_____________├┤_________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒____
______________________________▒                                      ▒_O__________,├┤,________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒____
______________________________▒▒▒▒▒▒▒▒▒▒▒▒▒____▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____________,..,________________________________________________________▒▒▒▒____
________________________________________________________________________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________▒▒▒▒____
________________________________________________________________________________@_______________▒    │°  ╚══════════════╝ °│    ▒_____________▒▒▒▒____
________________________________________________________________________________________________▒    │°   ≡ø≡  ±©±  ≡ø≡   °│    ▒_____________▒▒▒▒____
________________________________________________________________________________________________▒    └─────────────────────┘    ▒_____________▒▒▒▒____
________________________________________________________________________________________________▒    ░░░░░░░░░░░░░░░░░░░░░░░@   ▒_____________▒▒▒▒____
_________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________▒    ░░░░░░░░░░░░░░░░░░░░░░░    ▒_____________▒▒▒▒____
_________________________▒┌──────┐  ║      │   └──────┘   ▒________________┌_____┐______________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
_________________________▒└──────┘  ║      ┘              ▒______________@_│{(¤)}│______________▒    └───────┘░░░░░└───────┘    ▒_____________________
_________________________▒┌──────┐  ║                @    ▒________________├┴─┬─┴┤______________▒    └───────┘░░░░░└───────┘    ▒_____________________
_________________________▒└──────┘  ║      ┐              ▒_____________________________________▒    └───────┘░░░░░└───────┘    ▒_____________________
_________________________▒┌──────┐  ║      │              ______________________________________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
▒▒▒▒_____________________▒└──────┘  ║      │              ______________________________________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
▒▒▒▒_____________________▒          ║      │              ▒_____________________________________▒    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒_____________▒════  ════╝      │              ▒______________________________________    └───────┘░░░░░└───────┘    ▒_____________▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒_____________▒┐                │              ▒______________________________________                               ▒_____________________
▒▒▒▒_____________________▒│@              @│@             ▒_____________________________________▒                   ┌───────────▒_____________________
▒▒▒▒_____________________▒┘                │              ▒_____________________________________▒                           @   ▒_____________________
▒▒▒▒_____________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________▒▒▒▒____
▒▒▒▒__________________________________________________________________________________________________________________________________________▒▒▒▒____
______________________________________________________________________________________________________________________________________________▒▒▒▒____
______________________________________________________________________________________________________________________________________________▒▒▒▒____
______________________________________________________________________________________________________________________________________________▒▒▒▒____
▒▒▒▒_______________▒▒▒▒___________________________________________________▒▒▒▒_________________________________▒▒▒▒___________________________▒▒▒▒____
▒▒▒▒_______________▒▒▒▒___________________________________________________▒▒▒▒_________________________________▒▒▒▒___________________________________
▒▒▒▒_______________▒▒▒▒___________________________________________________▒▒▒▒_________________________________▒▒▒▒___________________________▒▒▒▒____
▒▒▒▒_______________▒▒▒▒___________________________________________________▒▒▒▒_________________________________▒▒▒▒___________________________▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_____________________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒_________________________▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒____
______________________________________________________________________________________________________________________________________________________
"#;




const palette: &str = "empty: ' . , ' * | wall: ▒ | other ▓ ░ ~ | pipes: ═ ║ ╣ ╠ ╩ ╦ ╗ ╝ ╚ ╔ ╬   ┐ └ ┴ ┬ ├ ─ ┼ ┘ ┌ ┤ │ ≡ ° × ¤ ¸ ¨ · ■ ¦ ± ¡ ø Ø ©";

fn parse_map(s_map: &str, mut cells: Vec<Vec<Cells>>, shop_type: Shops) -> (Vec<Vec<Cells>>, HashMap<(usize, usize), NPCWrap>, HashMap<(usize, usize), Item>, HashMap<(usize, usize), Item>) {
    // let mut cells: Vec<Vec<Cells>> = Vec::new();
    let mut rng = rand::thread_rng();
    let mut map_codet = s_map.clone().lines().next().unwrap_or("");
    let mut map_code: Vec<&str> = map_codet.split("|").collect();
    let npc_types: Vec<&str> = map_code.clone()[0].split(" ").collect();
    let sitem_types: Vec<&str> = map_code.clone()[1].split(" ").collect();
    let item_types: Vec<&str> = map_code.clone()[2].split(" ").collect();

    let data1 = fs::read_to_string("src/npcs/npc_names.json");
    //log::info!("{:?}", &data1); 
    let names: Vec<String> = match data1 {
        Ok(content) => serde_json::from_str(&content).unwrap(),
        Err(e) => { 
            log::info!("{:?}", e);
            Vec::new()
        },      
    };          
            
    let data2 = fs::read_to_string("src/npcs/npc_comms.json");
    //log::info!("{:?}", &data2);
    let comms: Vec<String> = match data2 {
        Ok(content) => serde_json::from_str(&content).unwrap(),
        Err(e) => { 
            log::info!("{:?}", e);
            Vec::new()      
        },                  
    };                      
                        
    let data3 = fs::read_to_string("src/npcs/npc_convos.json");
    //log::info!("{:?}", &data3); 
    let convos: Vec<Convo> = match data3 {
        Ok(content) => serde_json::from_str(&content).unwrap(),
        Err(e) => {     
            log::info!("{:?}", e);
            Vec::new()      
        },                  
    };                      
                        
    let data4 = fs::read_to_string("src/npcs/npc_shops.json");
    //log::info!("{:?}", &data4);
    let shops: ShopData = match data4 {
        Ok(content) => serde_json::from_str(&content).unwrap(),
        Err(e) => {
            log::info!("{:?}", e);
            ShopData {
                shops: Vec::new(),
                guilds: Vec::new(),
                churches: Vec::new(),
            }
        },
    };


    let data5 = fs::read_to_string("src/npcs/npc_shop_convos.json");
    //log::info!("{:?}", &data5);
    let shop_convos: ShopConvos = match data5 {
        Ok(content) => serde_json::from_str(&content).unwrap(),
        Err(e) => {
            log::info!("{:?}", e);
            ShopConvos {
                shops: Vec::new(),
                guilds: Vec::new(),
                churches: Vec::new(),
            }
        },
    };

    let mut ncount = 0;
    let mut icount = 0;
    let mut sicount = 0;
    //let mut cells = vec![vec![Cells::Null; 150]; 50];
    let mut npcs = HashMap::new();
    let mut items = HashMap::new();
    let mut sitems = HashMap::new();
    for (y, line) in s_map.lines().skip(1).enumerate() {
        for (x, ch) in line.chars().enumerate() {
            let cell = match ch.clone() {
                '_' => Cells::Empty,
                ',' => Cells::Grass1,
                '\'' => Cells::Grass2,
                '·' => Cells::Dirt1,
                '.' => Cells::Dirt2,
                '*' => Cells::Rock,
                '▒' => Cells::Wall,
                ' ' => Cells::Floor,
                '░' => Cells::Floor2,
                '~' => Cells::Water,
                '═' => Cells::MwH,
                '║' => Cells::MwV,
                '╣' => Cells::MwVL,
                '╠' => Cells::MwVR,
                '╩' => Cells::MwHU,
                '╦' => Cells::MwHD,
                '╝' => Cells::MwUL,
                '╚' => Cells::MwUR,
                '╗' => Cells::MwDL,
                '╔' => Cells::MwDR,
                '╬' => Cells::MwCR,
                '─' => Cells::SwH,
                '│' => Cells::SwV,
                '┤' => Cells::SwVL,
                '├' => Cells::SwVR,
                '┴' => Cells::SwHU,
                '┬' => Cells::SwHD,
                '┘' => Cells::SwUL,
                '└' => Cells::SwUR,
                '┐' => Cells::SwDL,
                '┌' => Cells::SwDR,
                '┼' => Cells::SwCR,
                '≡' => Cells::Cong,
                '°' => Cells::Deg,
                '×' => Cells::Mult,
                '¸' => Cells::Ced,
                '¨' => Cells::Diae,
                '·' => Cells::Inter,
                '■' => Cells::Blsq,
                '¦' => Cells::VBrk,
                '±' => Cells::PlMin,
                'ø' => Cells::SmZer,
                'Ø' => Cells::BZer,
                '©' => Cells::Cop,
                // '@' => Cells::NPCM,
                '{' => Cells::LBrce,
                '}' => Cells::RBrce,
                '(' => Cells::LParen,
                ')' => Cells::RParen,
                '¤' => Cells::GenCur,
                '~' => Cells::Water,
                'o' => Cells::Item,
                _ => Cells::Empty,
            };
            cells[y.clone()][x.clone()] = cell.clone();
            if ch.clone() == '@' {
                let def_name = "Kevthony".to_string();
                match npc_types[ncount] {
                    "CommNPC" => {
                        //let com_def = vec!["Welcome to the caves!!".to_string(), "Theres a tonne of folk down here, lerger cities as you go into the cave.".to_string()];
                        let rnd_comms = {
                            let mut tvec = Vec::new();
                            for _ in 0..4 {
                                let tidx = rng.gen_range(0..comms.len());
                                tvec.push(comms[tidx].clone());
                            }
                            tvec
                        };
                        let name = names.choose(&mut rng).unwrap_or(&def_name.clone()).clone();
                        let t_comm = new_comm_npc(name.clone(), x.clone(), y.clone(), rnd_comms.clone());
                        npcs.insert((x.clone(), y.clone()), NPCWrap::CommNPC(t_comm.clone()));
                    },
                    "ConvNPC" => {
                        let name = names.choose(&mut rng).unwrap_or(&def_name.clone()).clone();
                        //let comms = vec!["Welcome to the caves!!".to_string(), "Theres a tonne of folk down here, lerger cities as you go into the cave.".to_string()];
                        let conv: Convo = convos.choose(&mut rng).unwrap_or(&convos[0].clone()).clone();
                        let t_comm = new_conv_npc(name.clone(), x.clone(), y.clone(), conv.clone());
                        npcs.insert((x.clone(), y.clone()), NPCWrap::ConvNPC(t_comm.clone()));
                    },
                    "ShopNPC" => {
                        let name = names.choose(&mut rng).unwrap_or(&def_name.clone()).clone();
                        let s_conv: HashMap<String, String> = shops.shops.choose(&mut rng).unwrap_or(&shops.shops[0].clone()).clone();
                        
                        let s_conv = match shop_type {
                            Shops::Item => shops.shops.choose(&mut rng).unwrap_or(&shops.shops[0].clone()).clone(),
                            Shops::Guild => shops.guilds.choose(&mut rng).unwrap_or(&shops.guilds[0].clone()).clone(),
                            Shops::Church => shops.churches.choose(&mut rng).unwrap_or(&shops.churches[0].clone()).clone(),
                            _ => todo!(),
                        };

                        let convo = match shop_type {
                            Shops::Item => shop_convos.shops.choose(&mut rng).unwrap_or(&shop_convos.shops[0].clone()).clone(),
                            Shops::Guild => shop_convos.guilds.choose(&mut rng).unwrap_or(&shop_convos.guilds[0].clone()).clone(),
                            Shops::Church => shop_convos.churches.choose(&mut rng).unwrap_or(&shop_convos.churches[0].clone()).clone(),
                            _ => todo!(),
                        };

                        let t_shop = new_shop_npc(name.clone(), x.clone(), y.clone(), s_conv.clone(), convo.clone(), shop_type.clone());
                        npcs.insert((x.clone(), y.clone()), NPCWrap::ShopNPC(t_shop.clone()));
                    },
                    _ => todo!(),
                }
                ncount += 1;
            }
            if ch.clone() == 'o' {
                match sitem_types[sicount] {
                    "HealthPotion" => {
                        let ti = Item::new_health_potion(x.clone(), y.clone());
                        sitems.insert((x.clone(), y.clone()), ti.clone());
                    },
                    "Salve" => {
                        let ti = Item::new_salve(x.clone(), y.clone());
                        sitems.insert((x.clone(), y.clone()), ti.clone());
                    },
                    "Dowel" => {
                        let ti = Item::new_dowel(x.clone(), y.clone());
                        sitems.insert((x.clone(), y.clone()), ti.clone());
                    },
                    "WoodenBoard" => {
                        let ti = Item::new_wooden_board(x.clone(), y.clone());
                        sitems.insert((x.clone(), y.clone()), ti.clone());
                    },
                    "Apple" => {
                        let ti = Item::new_apple(x.clone(), y.clone());
                        sitems.insert((x.clone(), y.clone()), ti.clone());
                    },
                    _ => {log::info!("itm {:?}", sitem_types[sicount]);},
                }
                sicount += 1;
            }
            if ch.clone() == 'O' {
                match item_types[icount] {
                    "HealthPotion" => {
                        let ti = Item::new_health_potion(x.clone(), y.clone());
                        items.insert((x.clone(), y.clone()), ti.clone());
                    },
                    "Salve" => {
                        let ti = Item::new_salve(x.clone(), y.clone());
                        items.insert((x.clone(), y.clone()), ti.clone());
                    },
                    "Dowel" => {
                        let ti = Item::new_dowel(x.clone(), y.clone());
                        items.insert((x.clone(), y.clone()), ti.clone());
                    },
                    "WoodenBoard" => {
                        let ti = Item::new_wooden_board(x.clone(), y.clone());
                        items.insert((x.clone(), y.clone()), ti.clone());
                    },
                    "Apple" => {
                        let ti = Item::new_apple(x.clone(), y.clone());
                        items.insert((x.clone(), y.clone()), ti.clone());
                    },
                    _ => {log::info!("itm {:?}", item_types[icount]);},
                }
                icount += 1;
            }
        }
    }
    (cells, npcs, sitems, items)
}

fn place_small_parts(mut map: Vec<Vec<Cells>>, part: Vec<Vec<Cells>>, npcs: HashMap<(usize, usize), NPCWrap>, sitems: HashMap<(usize, usize), Item>, items: HashMap<(usize, usize), Item>, quad: u8) -> (Vec<Vec<Cells>>, HashMap<(usize, usize), NPCWrap>, HashMap<(usize, usize), Item>, HashMap<(usize, usize), Item>) {
    let (sx, sy) = {
        match quad {
            1 => (0, 0),
            2 => (75, 0),
            3 => (0, 25),
            4 => (75, 25),
            _ => {
                log::info!("small parts error");
                (0, 0)
            },
        }
    };

    for j in 0..part.len() {
        for i in 0..part[0].len() {
            //log::info!("copying map q: {:?} | dir: ({}, {}) | idx: ({}, {}) | char: {:?}", quad, sx, sy, i, j, part[j][i]);
            map[j + &sy][i + &sx] = part[j][i];
        }
    }
    let mut new_npcs = HashMap::new();
    for (npos, npc) in npcs {
        new_npcs.insert(((npos.0 + &sx), (npos.1 + &sy)), npc);
    }
    let mut new_sitems = HashMap::new();
    for (ipos, item) in sitems {
        new_sitems.insert(((ipos.0 + &sx), (ipos.1 + &sy)), item);
    }
    let mut new_items = HashMap::new();
    for (ipos, mut item) in items {
        item.set_pos(((ipos.0 + &sx), (ipos.1 + &sy)));
        new_items.insert(((ipos.0 + &sx), (ipos.1 + &sy)), item);
    }
    (map, new_npcs, new_sitems, new_items)
}

fn build_small_settle(is_cave_o: bool) -> (Vec<Vec<Cells>>, HashMap<(usize, usize), NPCWrap>, HashMap<(usize, usize), Item>, HashMap<(usize, usize), Item>) {
    let cells = vec![vec![Cells::Null; 150]; 50];
    let item_cell = vec![vec![Cells::Null; 75]; 25];
    let guild_cell= vec![vec![Cells::Null; 75]; 25];
    let church_cell = vec![vec![Cells::Null; 75]; 25];
    let anchor_cell = vec![vec![Cells::Null; 75]; 25];
    let mut rng = rand::thread_rng();
    let item_shop = if is_cave_o {
        cave_o1
    } else {
        item_shops.choose(&mut rng).expect("item parse failed")
    };
    
    let guild = if is_cave_o {
        cave_o3
    } else {
        guild_shops.choose(&mut rng).expect("guild parse failed")
    };
    let church = if is_cave_o {
        cave_o4
    } else {
        churches.choose(&mut rng).expect("church parse failed")
    };
    let anchor = if is_cave_o {
        cave_o2
    } else {
        anchors.choose(&mut rng).expect("anchor parse failed")
    };

   // let guild = guild_shops.choose(&mut rng).expect("guild parse failed");
   // let church = churches.choose(&mut rng).expect("church parse failed");
   // let anchor = anchors.choose(&mut rng).expect("anchor parse failed");
    let (item_map, item_npcs, item_sitems, item_items) = parse_map(item_shop, item_cell.clone(), Shops::Item);
    let (guild_map, guild_npcs, guild_sitems, guild_items) = parse_map(guild, guild_cell.clone(), Shops::Guild);
    let (church_map, church_npcs, church_sitems, church_items) = parse_map(church, church_cell.clone(), Shops::Church);
    let (anchor_map, anchor_npcs, anchor_sitems, anchor_items) = parse_map(anchor, anchor_cell.clone(), Shops::Null);
    let mut quads: Vec<u8> = vec![1, 2, 3, 4];
    let q1 = if is_cave_o {
        1
    } else {
        quads.choose(&mut rng).expect("rand 1 failed").clone()
    };
    quads.retain(|&x| x != q1);
    //let q1 = quads.choose(&mut rng).expect("rand 1 failed").clone();
    //quads.retain(|&x| x != q1);
    let (q1_map, q1_npcs, q1_sitems, q1_items) = place_small_parts(cells.clone(), item_map, item_npcs, item_sitems, item_items, q1);
    let q2 = if is_cave_o {
        3
    } else {
        quads.choose(&mut rng).expect("rand 2 failed").clone()
    };
    quads.retain(|&x| x != q2);

    //let q2 = quads.choose(&mut rng).expect("rand 2 failed").clone();
    //quads.retain(|&x| x != q2);
    let (q2_map, q2_npcs, q2_sitems, q2_items) = place_small_parts(q1_map.clone(), guild_map, guild_npcs, guild_sitems, guild_items, q2);
    let q3 = if is_cave_o {
        4
    } else {
        quads.choose(&mut rng).expect("rand 3 failed").clone()
    };
    quads.retain(|&x| x != q3);
    //let q3 = quads.choose(&mut rng).expect("rand 3 failed").clone();
    //quads.retain(|&x| x != q3);
    let (q3_map, q3_npcs, q3_sitems, q3_items) = place_small_parts(q2_map.clone(), church_map, church_npcs, church_sitems, church_items, q3);
    let q4 = if is_cave_o {
        2
    } else {
        quads.choose(&mut rng).expect("rand 4 failed").clone()
    };
    quads.retain(|&x| x != q4);
    //let q4 = quads.choose(&mut rng).expect("rand 4 failed").clone();
    let (final_map, q4_npcs, q4_sitems, q4_items) = place_small_parts(q3_map.clone(), anchor_map, anchor_npcs, anchor_sitems, anchor_items, q4);
    let mut final_npcs = HashMap::new();
    let mut final_sitems = HashMap::new();
    let mut final_items = HashMap::new();
    //let mut s_npcs = HashMap::new();
    //s_npcs.insert();
    final_npcs.extend(q1_npcs);
    final_npcs.extend(q2_npcs);
    final_npcs.extend(q3_npcs);
    final_npcs.extend(q4_npcs);
    final_sitems.extend(q1_sitems);
    final_sitems.extend(q2_sitems);
    final_sitems.extend(q3_sitems);
    final_sitems.extend(q4_sitems);
    final_items.extend(q1_items);
    final_items.extend(q2_items);
    final_items.extend(q3_items);
    final_items.extend(q4_items);
    //log::info!("{:?}", &final_sitems);
    log::info!("{:?}", &final_items);
    (final_map, final_npcs, final_sitems, final_items)
}


fn get_npc_shops(mut npcs: HashMap<(usize, usize), NPCWrap>, sitems: HashMap<(usize, usize), Item>) -> (HashMap<Shops, Shop>, HashMap<(usize, usize), NPCWrap>) {
    let mut s_npcs = HashMap::new();
    for (k, v) in npcs.clone() {
        match v {
            NPCWrap::ShopNPC(_) => {
                s_npcs.insert(k, v);
                //npcs.remove(&k);
            },
            _ => {},
        }
    };
    let mut shops = HashMap::new();

    for (_, n) in s_npcs {
        //let nb = box_npc(n);
        let mut snpc = match n {
            NPCWrap::ShopNPC(shop_npc) => shop_npc,
            _ => todo!(),
        };
        let shop_name = "shop_name".to_string();
        match snpc.get_shop_type() {
             Shops::Item => shops.insert(Shops::Item, Shop::new_item_shop(snpc.get_sh_conv()[&shop_name].clone(), NPCWrap::ShopNPC(snpc), sitems.clone())),
             Shops::Guild => shops.insert(Shops::Guild, Shop::new_guild(snpc.get_sh_conv()[&shop_name].clone(), NPCWrap::ShopNPC(snpc), HashMap::new())),
             Shops::Church => shops.insert(Shops::Church, Shop::new_church(snpc.get_sh_conv()[&shop_name].clone(), NPCWrap::ShopNPC(snpc), HashMap::new())),
             //_ => Some(Shop::default()),
             _ => todo!(),
        };
    }
    (shops, npcs.clone())
}

#[derive(Clone, Debug, PartialEq)]
pub struct Settlement {
    stype: Settle,
    sname: String,
    pos: (i64, i64),
    npcs: HashMap<(usize, usize), NPCWrap>,
    items: HashMap<(usize, usize), Item>,
    npcs_sent: bool,
    items_sent: bool,
    shops: HashMap<Shops, Shop>,
    map: Vec<Vec<Cells>>,
}

impl Settlement {
    pub fn new(stype: Settle, sname: String, pos: (i64, i64), npcs: HashMap<(usize, usize), NPCWrap>, items: HashMap<(usize, usize), Item>, shops: HashMap<Shops, Shop>, map: Vec<Vec<Cells>>) -> Self {
        Self {stype, sname, pos, npcs, items, npcs_sent: false, items_sent: false, shops, map}
    }

    pub fn demo_settle(pos: (i64, i64), npcs: HashMap<(usize, usize), NPCWrap>) -> Self {
        let cells = vec![vec![Cells::Null; 150]; 50];
        //let (map, mpcs, sitems, items) = parse_map(cave_o, cells, Shops::Item);
        // log::info!("{:?}", &items);
        let (map, mut mpcs, sitems, items) = build_small_settle(true);

       // let mut shops = HashMap::new();
       // let mut cnv = HashMap::new();
       // cnv.insert("item_desc".to_string(), "Hey that {i} over there goes for {v}. Let me know if you want to buy it.".to_string());
       // cnv.insert("item_broke".to_string(), "Uh oh! it looks like you dont have enough money for that.".to_string());
       // cnv.insert("item_bought".to_string(), "Hey!! Thanks for the sale!! Have a good day!!.".to_string());
       // cnv.insert("item_nbought".to_string(), "Not interested? Thats fine, have a good day!!".to_string());
       // let npc = new_shop_npc("Janiel".to_string(), 0, 0, cnv);
       // let npc_t = NPCWrap::ShopNPC(npc);
       // let s_npcs = get_shop_npcs(mpcs);
       // let shop = Shop::new_item_shop("item shop".to_string(), npc_t, sitems);
       // shops.insert(Shops::Item, shop);
        
        let (shops, snpcs) = get_npc_shops(mpcs.clone(), sitems);

        Self {
            stype: Settle::Small,
            sname: "Cave Opening".to_string(),
            pos: pos,
            npcs: snpcs,
            items: items,
            npcs_sent: false,
            items_sent: false,
            shops: shops,
            map: map,
        }
    }

    pub fn new_small_settle(pos: (i64, i64)) -> Self {
        let data1 = fs::read_to_string("src/locations/settle_names.json");
        //log::info!("{:?}", &data1); 
        let names: Vec<String> = match data1 {
            Ok(content) => serde_json::from_str(&content).unwrap(),
            Err(e) => { 
                log::info!("{:?}", e);
                Vec::new()
            },      
        };
        let mut rng = rand::thread_rng();
        let name_oops = "Jadeitite".to_string();
        let name = names.choose(&mut rng).unwrap_or(&name_oops.clone()).clone();
        
        let (map, mut npcs, sitems, items) = build_small_settle(false);

        let (shops, snpcs) = get_npc_shops(npcs.clone(), sitems);

        //let s_key = get_shop_npcs(npcs.clone()).expect("failed to get shop npc 1");
        //let s_npc = npcs.remove(&s_key).expect("failed to get shop npc 2"); 
        //npcs.insert-----------
        //let npc_t = NPCWrap::ShopNPC(s_npc);
        //let shop = Shop::new_item_shop("new item shop".to_string(), s_npc, sitems);
        //let mut shops = HashMap::new();
        //shops.insert(Shops::Item, shop);
        Self {
            stype: Settle::Small,
            sname: name,
            pos: pos,
            npcs: npcs,
            items: items,
            npcs_sent: false,
            items_sent: false,
            shops: shops,
            map: map,
        }
    }

    pub fn get_all_shop_items(&mut self) -> Option<HashMap<(usize, usize), Item>> {
        let mut asi = HashMap::new();
        for (_, shop) in &self.shops {
            for ((x, y), i) in shop.get_stock() {
                asi.insert((x, y), i.clone());
            }
        }
        if asi.len() == 0 {
            None
        } else {
            Some(asi.clone())
        }
    }

    pub fn get_shop_from_item_pos(&mut self, pos: (i64, i64)) -> Option<Shop> {
        for (sh, s) in &self.shops {
            for ((x, y), i) in s.get_stock() {
                 // if x  && y == (pos.1 - self.pos.1) {
                 if (x as i64 + self.pos.0) == pos.0 && (y as i64 + self.pos.1) == pos.1 {
                    return Some(s.clone());
                }
            }
        }
        None
    }

    pub fn update_shop(&mut self, mut shop: Shop) {
        let stype = shop.get_sptype();
        self.shops.insert(stype, shop);
    }

    pub fn get_pos(&mut self) -> (i64, i64) {
        self.pos.clone()
    }

    pub fn set_pos(&mut self, tpos: (i64, i64)) {
        self.pos = tpos;
    }

    pub fn get_npcs(&mut self) -> HashMap<(usize, usize), NPCWrap> {
        self.npcs.clone()
    }

    pub fn get_npcs_sent(&mut self) -> bool {
        self.npcs_sent.clone()
    }

    pub fn tog_npcs_sent(&mut self) {
        self.npcs_sent = !self.npcs_sent;
    }

    pub fn get_items(&mut self) -> HashMap<(usize, usize), Item> {
        self.items.clone()
    }

    pub fn get_items_sent(&mut self) -> bool {
        self.items_sent.clone()
    }

    pub fn tog_items_sent(&mut self) {
        self.items_sent = !self.items_sent;
    }

    pub fn get_shops(&mut self) -> HashMap<Shops, Shop> {
        self.shops.clone()
    }

    pub fn get_map(&mut self) -> Vec<Vec<Cells>> {
        self.map.clone()
    }

    pub fn get_sname(&mut self) -> String {
        self.sname.clone()
    }
}
